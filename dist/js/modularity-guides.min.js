!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,n){"use strict";n.r(t);var i;i=jQuery,new function(){i("#modal-email-todo form").on("submit",(function(e){e.preventDefault();var t=i(e.target).parents(".grid").first();if(""===t.find('textarea[name="g-recaptcha-response"]').val())return!1;i(this).find('input[type="submit"]').hide(),i(this).find(".modal-footer").append('<div class="loading"><div></div><div></div><div></div><div></div></div>');var n=t.first().find("table").clone();n.appendTo(document.body),n.find("tr").not(":visible").remove();var r=n[0].outerHTML;n.remove();var o=encodeURI(r),a=t.find('textarea[name="g-recaptcha-response"]').val(),d={action:"email_todo",checklist:o,email:t.find('input[name="email"]').val(),captcha:a};return i.post(ajaxurl,d,(function(e){t.find(".loading").remove(),t.find('input[type="submit"]').show(),"success"==e?t.after('<div class="grid"><div class="grid-md-12"><div class="notice success">'+guides.email_sent+"</div></div></div>"):t.after('<div class="grid"><div class="grid-md-12"><div class="notice warning">'+guides.email_failed+"</div></div></div>"),location.hash=""})),!1}))},function(e){function t(){this.handleEvents(),this.contentToggleEngine()}t.prototype.handleEvents=function(){e('input[type="checkbox"][data-mod-guide-relation]').on("change",(function(t){var n=e(this).data("mod-guide-relation");n=n.split(","),e.each(n,(function(t,n){var i=e('input[type="checkbox"][data-mod-guide-toggle-key="'+n+'"]');i.prop("checked",!i.prop("checked")).trigger("change")}))})),e("[data-mod-guide-toggle-key]").on("change",function(e){this.contentToggleEngine()}.bind(this))},t.prototype.contentToggleEngine=function(){var t=[];e("[data-mod-guide-toggle-key]").each((function(n,i){!0===e(i).prop("checked")&&t.push(e(i).attr("data-mod-guide-toggle-key"))})),e("[data-mod-guide-toggle-key-content]").each((function(n,i){var r=!1,o=e(i).attr("data-mod-guide-toggle-key-content");o=o.split(","),e.each(o,(function(e,n){var i=n.match(/(^|\+)([^\+\-]+)/g),o=new RegExp("\\b("+i.join("|").replace("+","")+")\\b","ig"),a=t.join(",").match(o),d=null!==a&&a.length===i.length,u=n.match(/\-([^\+\-]+)/g),c=!0;if(null!==u){var l=new RegExp("\\b("+u.join("|").replace("-","")+")\\b","ig"),s=t.join(",").match(l);c=!(null!==s&&s.length>0)}d&&c&&(r=!0)})),!0!==r?e(i).hide():e(i).show()}))},new t}(jQuery);function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e){var t;e.preventDefault();var n=e.target,i=e.target.classList.contains(".js-modularity-guide__next".substring(1)),r=null==n?void 0:n.closest(".js-modularity-guide"),o=null==n?void 0:n.closest(".js-modularity-guide__section"),a=parseInt(null!==(t=null==o?void 0:o.getAttribute("data-guide-step"))&&void 0!==t?t:"-1");if(a>0){var d=i?a+1:a-1,u=null==r?void 0:r.querySelector("[".concat("data-guide-step",'="').concat(d,'"]')),c=null==u?void 0:u.querySelector("[js-expand-button]");c&&c.click()}}function d(e){var t=[].concat(r(e.querySelectorAll(".js-modularity-guide__next")),r(e.querySelectorAll(".js-modularity-guide__prev")));t.length>0&&t.forEach((function(e){e.addEventListener("click",a)}))}window.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-modularity-guide");e&&e.length>0&&e.forEach(d)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2pzL0NvbnRlbnQvVG9kby5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvanMvQ29udGVudC9jaGVja2JveGVzLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9qcy9tb2R1bGFyaXR5LWd1aWRlcy5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIiQiLCJqUXVlcnkiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIiRjb250YWluZXIiLCJ0YXJnZXQiLCJwYXJlbnRzIiwiZmlyc3QiLCJmaW5kIiwidmFsIiwidGhpcyIsImhpZGUiLCJhcHBlbmQiLCIkY2hlY2tsaXN0IiwiY2xvbmUiLCJhcHBlbmRUbyIsImRvY3VtZW50IiwiYm9keSIsIm5vdCIsInJlbW92ZSIsImNoZWNrbGlzdEhUTUwiLCJvdXRlckhUTUwiLCJjaGVja2xpc3QiLCJlbmNvZGVVUkkiLCJnQ2FwdGNoYSIsImRhdGEiLCJhY3Rpb24iLCJlbWFpbCIsImNhcHRjaGEiLCJwb3N0IiwiYWpheHVybCIsInJlc3BvbnNlIiwic2hvdyIsImFmdGVyIiwiZ3VpZGVzIiwiZW1haWxfc2VudCIsImVtYWlsX2ZhaWxlZCIsImxvY2F0aW9uIiwiaGFzaCIsIkNoZWNrYm94ZXMiLCJoYW5kbGVFdmVudHMiLCJjb250ZW50VG9nZ2xlRW5naW5lIiwicmVsYXRpb25zIiwic3BsaXQiLCJlYWNoIiwiaW5kZXgiLCJpdGVtIiwiJGNiIiwicHJvcCIsInRyaWdnZXIiLCJjaGVja2VkIiwiZWxlbWVudCIsInB1c2giLCJhdHRyIiwic2hvdWxkU2hvdyIsImNvbmRpdGlvbnMiLCJhbmQiLCJtYXRjaCIsImFuZFBhdHRlcm4iLCJSZWdFeHAiLCJqb2luIiwicmVwbGFjZSIsImFuZE1hdGNoZXMiLCJhbmRJc01hdGNoaW5nIiwibGVuZ3RoIiwiYW5kbm90IiwiYW5kbm90SXNNYXRjaGluZyIsImFuZG5vdFBhdHRlcm4iLCJhbmRub3RNYXRjaGVzIiwiaGFuZGxlUHJldk5leHRDbGljayIsInByZXZOZXh0QnV0dG9uRWxlbWVudCIsImlzTmV4dCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic3Vic3RyaW5nIiwiY3VycmVudEd1aWRlIiwiY2xvc2VzdCIsImN1cnJlbnRTZWN0aW9uIiwiY3VycmVudFN0ZXAiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsInRhcmdldFN0ZXAiLCJ0YXJnZXRTZWN0aW9uIiwicXVlcnlTZWxlY3RvciIsInRhcmdldFRvZ2dsZSIsImNsaWNrIiwic3Vic2NyaWJlUHJldk5leHRCdXR0b25zIiwid3JhcHBlckVsZW1lbnQiLCJidXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidXR0b25FbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIndpbmRvdyIsImd1aWRlTW9kdWxlcyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVND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LEdBQ3RDOEIsRUFBYUosUUFBUUoiLCJmaWxlIjoianMvbW9kdWxhcml0eS1ndWlkZXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgkKSB7XG5cbiAgICBmdW5jdGlvbiBUb2RvKCkge1xuICAgICAgICAkKCcjbW9kYWwtZW1haWwtdG9kbyBmb3JtJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGxldCAkY29udGFpbmVyID0gJChlLnRhcmdldCkucGFyZW50cygnLmdyaWQnKS5maXJzdCgpO1xuICAgICAgICAgICAgaWYgKCRjb250YWluZXIuZmluZCgndGV4dGFyZWFbbmFtZT1cImctcmVjYXB0Y2hhLXJlc3BvbnNlXCJdJykudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nKS5oaWRlKCk7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5tb2RhbC1mb290ZXInKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJsb2FkaW5nXCI+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48L2Rpdj4nKTtcblxuICAgICAgICAgICAgbGV0ICRjaGVja2xpc3QgPSAkY29udGFpbmVyLmZpcnN0KCkuZmluZCgndGFibGUnKS5jbG9uZSgpO1xuICAgICAgICAgICAgJGNoZWNrbGlzdC5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgICRjaGVja2xpc3QuZmluZCgndHInKS5ub3QoJzp2aXNpYmxlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICBsZXQgY2hlY2tsaXN0SFRNTCA9ICRjaGVja2xpc3RbMF0ub3V0ZXJIVE1MO1xuICAgICAgICAgICAgJGNoZWNrbGlzdC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgbGV0IGNoZWNrbGlzdCA9IGVuY29kZVVSSShjaGVja2xpc3RIVE1MKTtcblxuICAgICAgICAgICAgbGV0IGdDYXB0Y2hhID0gJGNvbnRhaW5lci5maW5kKCd0ZXh0YXJlYVtuYW1lPVwiZy1yZWNhcHRjaGEtcmVzcG9uc2VcIl0nKS52YWwoKTtcblxuICAgICAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnZW1haWxfdG9kbycsXG4gICAgICAgICAgICAgICAgY2hlY2tsaXN0OiBjaGVja2xpc3QsXG4gICAgICAgICAgICAgICAgZW1haWw6ICRjb250YWluZXIuZmluZCgnaW5wdXRbbmFtZT1cImVtYWlsXCJdJykudmFsKCksXG4gICAgICAgICAgICAgICAgY2FwdGNoYTogZ0NhcHRjaGFcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICQucG9zdChhamF4dXJsLCBkYXRhLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkY29udGFpbmVyLmZpbmQoJy5sb2FkaW5nJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJGNvbnRhaW5lci5maW5kKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlID09ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLmFmdGVyKCc8ZGl2IGNsYXNzPVwiZ3JpZFwiPjxkaXYgY2xhc3M9XCJncmlkLW1kLTEyXCI+PGRpdiBjbGFzcz1cIm5vdGljZSBzdWNjZXNzXCI+JyArIGd1aWRlcy5lbWFpbF9zZW50ICsgJzwvZGl2PjwvZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJncmlkXCI+PGRpdiBjbGFzcz1cImdyaWQtbWQtMTJcIj48ZGl2IGNsYXNzPVwibm90aWNlIHdhcm5pbmdcIj4nICsgZ3VpZGVzLmVtYWlsX2ZhaWxlZCArICc8L2Rpdj48L2Rpdj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gJyc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFRvZG8oKTtcblxufSkoalF1ZXJ5KTtcbiIsImV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoJCkge1xuXG4gICAgZnVuY3Rpb24gQ2hlY2tib3hlcygpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVFdmVudHMoKTtcbiAgICAgICAgdGhpcy5jb250ZW50VG9nZ2xlRW5naW5lKCk7XG4gICAgfVxuXG4gICAgQ2hlY2tib3hlcy5wcm90b3R5cGUuaGFuZGxlRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtbW9kLWd1aWRlLXJlbGF0aW9uXScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICBsZXQgcmVsYXRpb25zID0gJCh0aGlzKS5kYXRhKCdtb2QtZ3VpZGUtcmVsYXRpb24nKTtcbiAgICAgICAgICAgIHJlbGF0aW9ucyA9IHJlbGF0aW9ucy5zcGxpdCgnLCcpO1xuXG4gICAgICAgICAgICAkLmVhY2gocmVsYXRpb25zLCBmdW5jdGlvbiAoaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBsZXQgJGNiID0gJCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtbW9kLWd1aWRlLXRvZ2dsZS1rZXk9XCInICsgaXRlbSArICdcIl0nKTtcbiAgICAgICAgICAgICAgICAkY2IucHJvcCgnY2hlY2tlZCcsICEkY2IucHJvcCgnY2hlY2tlZCcpKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCdbZGF0YS1tb2QtZ3VpZGUtdG9nZ2xlLWtleV0nKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFRvZ2dsZUVuZ2luZSgpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuXG5cbiAgICB9O1xuXG4gICAgQ2hlY2tib3hlcy5wcm90b3R5cGUuY29udGVudFRvZ2dsZUVuZ2luZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBHZXQgY2hlY2tlZCBjaGVja2JveGVzXG4gICAgICAgIGxldCBjaGVja2VkID0gW107XG4gICAgICAgIGxldCAkY2hlY2tib3hlcyA9ICQoJ1tkYXRhLW1vZC1ndWlkZS10b2dnbGUta2V5XScpO1xuXG4gICAgICAgICRjaGVja2JveGVzLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoJChlbGVtZW50KS5wcm9wKCdjaGVja2VkJykgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNoZWNrZWQucHVzaCgkKGVsZW1lbnQpLmF0dHIoJ2RhdGEtbW9kLWd1aWRlLXRvZ2dsZS1rZXknKSk7XG5cblxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBEaXNwbGF5IG9yIGhpZGUgY29udGVudFxuICAgICAgICAkKCdbZGF0YS1tb2QtZ3VpZGUtdG9nZ2xlLWtleS1jb250ZW50XScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgICBsZXQgc2hvdWxkU2hvdyA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNvbmRpdGlvbnMgPSAkKGVsZW1lbnQpLmF0dHIoJ2RhdGEtbW9kLWd1aWRlLXRvZ2dsZS1rZXktY29udGVudCcpO1xuICAgICAgICAgICAgY29uZGl0aW9ucyA9IGNvbmRpdGlvbnMuc3BsaXQoJywnKTtcblxuICAgICAgICAgICAgLy8gRGF0ZXJtaW5kIGlmIGNvbnRlbnQgc2hvdWxkIGJlIHNob3duIG9yIG5vdFxuICAgICAgICAgICAgJC5lYWNoKGNvbmRpdGlvbnMsIGZ1bmN0aW9uIChpbmRleCwgaXRlbSkge1xuICAgICAgICAgICAgICAgIGxldCBhbmQgPSBpdGVtLm1hdGNoKC8oXnxcXCspKFteXFwrXFwtXSspL2cpO1xuICAgICAgICAgICAgICAgIGxldCBhbmRQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnXFxcXGIoJyArIGFuZC5qb2luKCd8JykucmVwbGFjZSgnKycsICcnKSArICcpXFxcXGInLCAnaWcnKTtcbiAgICAgICAgICAgICAgICBsZXQgYW5kTWF0Y2hlcyA9IGNoZWNrZWQuam9pbignLCcpLm1hdGNoKGFuZFBhdHRlcm4pO1xuICAgICAgICAgICAgICAgIGxldCBhbmRJc01hdGNoaW5nID0gYW5kTWF0Y2hlcyAhPT0gbnVsbCAmJiBhbmRNYXRjaGVzLmxlbmd0aCA9PT0gYW5kLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGxldCBhbmRub3QgPSBpdGVtLm1hdGNoKC9cXC0oW15cXCtcXC1dKykvZyk7XG4gICAgICAgICAgICAgICAgbGV0IGFuZG5vdElzTWF0Y2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChhbmRub3QgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFuZG5vdFBhdHRlcm4gPSBuZXcgUmVnRXhwKCdcXFxcYignICsgYW5kbm90LmpvaW4oJ3wnKS5yZXBsYWNlKCctJywgJycpICsgJylcXFxcYicsICdpZycpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYW5kbm90TWF0Y2hlcyA9IGNoZWNrZWQuam9pbignLCcpLm1hdGNoKGFuZG5vdFBhdHRlcm4pO1xuICAgICAgICAgICAgICAgICAgICBhbmRub3RJc01hdGNoaW5nID0gIShhbmRub3RNYXRjaGVzICE9PSBudWxsICYmIGFuZG5vdE1hdGNoZXMubGVuZ3RoID4gMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFuZElzTWF0Y2hpbmcgJiYgYW5kbm90SXNNYXRjaGluZykge1xuICAgICAgICAgICAgICAgICAgICBzaG91bGRTaG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gSGlkZSBvciBzaG93XG4gICAgICAgICAgICBpZiAoc2hvdWxkU2hvdyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuc2hvdygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJChlbGVtZW50KS5oaWRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG5cblxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBDaGVja2JveGVzKCk7XG5cbn0pKGpRdWVyeSk7XG4iLCJpbXBvcnQgJy4vQ29udGVudC9Ub2RvLmpzJztcbmltcG9ydCAnLi9Db250ZW50L2NoZWNrYm94ZXMuanMnO1xuXG4vLyBSZXF1aXJlZCBzZWxlY3RvcnNcbmNvbnN0IFNFTEVDVE9SX01PRFVMQVJJVFlfR1VJREUgPSAnLmpzLW1vZHVsYXJpdHktZ3VpZGUnO1xuY29uc3QgU0VMRUNUT1JfU0VDVElPTiA9ICcuanMtbW9kdWxhcml0eS1ndWlkZV9fc2VjdGlvbic7XG5jb25zdCBTRUxFQ1RPUl9ORVhUID0gJy5qcy1tb2R1bGFyaXR5LWd1aWRlX19uZXh0JztcbmNvbnN0IFNFTEVDVE9SX1BSRVYgPSAnLmpzLW1vZHVsYXJpdHktZ3VpZGVfX3ByZXYnO1xuY29uc3QgU0VMRUNUT1JfQUNDT1JESU9OX1RPR0dMRSA9ICdbanMtZXhwYW5kLWJ1dHRvbl0nO1xuXG4vLyBSZXF1aXJlZCBkYXRhLWF0dHJpYnV0ZXNcbmNvbnN0IEFUVFJJQlVURV9TVEVQID0gJ2RhdGEtZ3VpZGUtc3RlcCc7XG5cbi8qKlxuICogQ2xpY2sgaGFuZGxlciBmb3IgTmV4dCAmIFByZXYgYnV0dG9ucywgXG4gKiB3aWxsIHRyYXZlcnNlIHVwIHRvIGZpbmQgY3VycmVudCwgcHJldmlvdXMgYW5kIHRoZSBuZXh0IHN0ZXAgdG8gc2ltdWxhdGUgYWNjb3JkaW9uIGNsaWNrXG4gKiBAcGFyYW0geyp9IGUgZXZlbnRcbiAqL1xuZnVuY3Rpb24gaGFuZGxlUHJldk5leHRDbGljayhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgcHJldk5leHRCdXR0b25FbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgY29uc3QgaXNOZXh0ID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFNFTEVDVE9SX05FWFQuc3Vic3RyaW5nKDEpKTtcblxuICAgIC8vIFRyYXZlcnNlIERPTSB1cHdhcmRzXG4gICAgY29uc3QgY3VycmVudEd1aWRlID0gcHJldk5leHRCdXR0b25FbGVtZW50Py5jbG9zZXN0KFNFTEVDVE9SX01PRFVMQVJJVFlfR1VJREUpO1xuICAgIGNvbnN0IGN1cnJlbnRTZWN0aW9uID0gcHJldk5leHRCdXR0b25FbGVtZW50Py5jbG9zZXN0KFNFTEVDVE9SX1NFQ1RJT04pO1xuICAgIGNvbnN0IGN1cnJlbnRTdGVwID0gcGFyc2VJbnQoY3VycmVudFNlY3Rpb24/LmdldEF0dHJpYnV0ZShBVFRSSUJVVEVfU1RFUCkgPz8gJy0xJyk7XG5cbiAgICBpZiAoY3VycmVudFN0ZXAgPiAwKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFN0ZXAgPSBpc05leHQgPyBjdXJyZW50U3RlcCArIDEgOiBjdXJyZW50U3RlcCAtIDE7XG4gICAgICAgIGNvbnN0IHRhcmdldFNlY3Rpb24gPSBjdXJyZW50R3VpZGU/LnF1ZXJ5U2VsZWN0b3IoYFske0FUVFJJQlVURV9TVEVQfT1cIiR7dGFyZ2V0U3RlcH1cIl1gKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0VG9nZ2xlID0gdGFyZ2V0U2VjdGlvbj8ucXVlcnlTZWxlY3RvcihTRUxFQ1RPUl9BQ0NPUkRJT05fVE9HR0xFKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0YXJnZXRUb2dnbGUpIHtcbiAgICAgICAgICAgIHRhcmdldFRvZ2dsZS5jbGljaygpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiBTdWJzY3JpYmUgcHJldi9uZXh0IGJ1dHRvbiBjbGljayBldmVudFxuICogQHBhcmFtIHtFbGVtZW50fSB3cmFwcGVyRWxlbWVudCBcbiAqL1xuZnVuY3Rpb24gc3Vic2NyaWJlUHJldk5leHRCdXR0b25zKHdyYXBwZXJFbGVtZW50KSB7XG4gICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgLi4ud3JhcHBlckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9ORVhUKSxcbiAgICAgICAgLi4ud3JhcHBlckVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChTRUxFQ1RPUl9QUkVWKSxcbiAgICBdO1xuXG4gICAgaWYgKGJ1dHRvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uRWxlbWVudCA9PiB7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlUHJldk5leHRDbGljayk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBRdWVyeSBndWlkZSBtb2R1bGVzICYgaW5pdGlhbGl6ZSBzdHVmZlxuICovXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIGNvbnN0IGd1aWRlTW9kdWxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoU0VMRUNUT1JfTU9EVUxBUklUWV9HVUlERSk7XG5cbiAgICBpZiAoZ3VpZGVNb2R1bGVzICYmIGd1aWRlTW9kdWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGd1aWRlTW9kdWxlcy5mb3JFYWNoKHN1YnNjcmliZVByZXZOZXh0QnV0dG9ucyk7XG4gICAgfVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGluaXQpOyJdLCJzb3VyY2VSb290IjoiIn0=